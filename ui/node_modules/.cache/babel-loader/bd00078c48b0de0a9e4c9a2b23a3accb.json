{"ast":null,"code":"import _regeneratorRuntime from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/martinbrandt/martin-brandt/calorie-counter/src/pages/SignUp.jsx\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 30px;\\n    height: 30px;\\n    width: 60px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 5px;\\n    display: flex;\\n    flex-direction: column;\\n    width: 300px;\\n    align-items: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    background-color: \", \";\\n    align-items: center;\\n    margin: 40px 80px 40px 80px;\\n    padding: 20px 0 20px 0;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { lightGreen } from 'variables';\nimport { Formik } from 'formik';\nimport { assoc } from 'ramda';\nimport { signUpUser } from 'Api';\nimport FormItem from 'components/FormItem';\nimport Button from 'components/Button';\nvar SignUpContainer = styled.div(_templateObject(), lightGreen);\nvar SignUpForm = styled.form(_templateObject2());\nvar StyledButton = styled.button(_templateObject3());\n\nvar SignUp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUp, _Component);\n\n  function SignUp() {\n    var _this;\n\n    _classCallCheck(this, SignUp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUp).call(this));\n\n    _this.userCreatedForm = function () {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"User \".concat(_this.state.createdUser.email, \" created successfully\")), React.createElement(StyledButton, {\n        onClick: _this.props.toggleSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Start logging\"));\n    };\n\n    _this.setCreatedUser = function (user) {\n      return _this.setState({\n        createdUser: user\n      });\n    };\n\n    _this.state = {\n      createdUser: null\n    };\n    return _this;\n  }\n\n  _createClass(SignUp, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return this.state.createdUser ? this.userCreatedForm() : React.createElement(Formik, {\n        initialValues: {\n          email: '',\n          password: '',\n          name: '',\n          dailyCalorieGoal: 2000\n        },\n        validate: function validate(values) {\n          var errors = {};\n\n          if (!values.email) {\n            errors.email = 'Required';\n          } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) {\n            errors.email = 'Invalid email address';\n          }\n\n          return errors;\n        },\n        onSubmit:\n        /*#__PURE__*/\n        function () {\n          var _ref2 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(values, _ref) {\n            var setSubmitting, response;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    setSubmitting = _ref.setSubmitting;\n                    setTimeout(function () {\n                      setSubmitting(false);\n                    }, 400);\n                    _context.next = 4;\n                    return signUpUser(values);\n\n                  case 4:\n                    response = _context.sent;\n                    _context.t0 = _this2;\n                    _context.next = 8;\n                    return response.json();\n\n                  case 8:\n                    _context.t1 = _context.sent;\n\n                    _context.t0.setCreatedUser.call(_context.t0, _context.t1);\n\n                  case 10:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x, _x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, function (_ref3) {\n        var values = _ref3.values,\n            errors = _ref3.errors,\n            touched = _ref3.touched,\n            handleChange = _ref3.handleChange,\n            handleSubmit = _ref3.handleSubmit,\n            isSubmitting = _ref3.isSubmitting;\n        return React.createElement(SignUpContainer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Create an account:\"), React.createElement(SignUpForm, {\n          onSubmit: handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(FormItem, {\n          type: \"email\",\n          name: \"email\",\n          handleChange: handleChange,\n          value: values.email,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }), React.createElement(FormItem, {\n          type: \"text\",\n          name: \"name\",\n          handleChange: handleChange,\n          value: values.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }), React.createElement(FormItem, {\n          type: \"text\",\n          name: \"daily calorie goal\",\n          handleChange: handleChange,\n          value: values.dailyCalorieGoal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }), React.createElement(FormItem, {\n          type: \"password\",\n          name: \"password\",\n          handleChange: handleChange,\n          value: values.password,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }), React.createElement(Button, {\n          type: \"submit\",\n          disabled: isSubmitting,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"Submit\"), React.createElement(Button, {\n          inverse: true,\n          value: \"Cancel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        })));\n      });\n    }\n  }]);\n\n  return SignUp;\n}(Component);\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/martinbrandt/martin-brandt/calorie-counter/src/pages/SignUp.jsx"],"names":["React","Component","styled","lightGreen","Formik","assoc","signUpUser","FormItem","Button","SignUpContainer","div","SignUpForm","form","StyledButton","button","SignUp","userCreatedForm","state","createdUser","email","props","toggleSignUp","setCreatedUser","user","setState","password","name","dailyCalorieGoal","values","errors","test","setSubmitting","setTimeout","response","json","touched","handleChange","handleSubmit","isSubmitting"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport {lightGreen} from 'variables';\nimport {Formik} from 'formik';\nimport {assoc} from 'ramda';\nimport {signUpUser} from 'Api';\nimport FormItem from 'components/FormItem';\nimport Button from 'components/Button';\n\nconst SignUpContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    background-color: ${lightGreen};\n    align-items: center;\n    margin: 40px 80px 40px 80px;\n    padding: 20px 0 20px 0;\n`;\n\nconst SignUpForm = styled.form`\n    margin: 5px;\n    display: flex;\n    flex-direction: column;\n    width: 300px;\n    align-items: center;\n`\n\n\n\nconst StyledButton = styled.button`\n    margin: 30px;\n    height: 30px;\n    width: 60px;\n`\n\n\n\nclass SignUp extends Component {\n    constructor() {\n        super();\n        this.state = {\n            createdUser: null\n        }\n    }\n\n    userCreatedForm = () => <div>\n            <h4>{`User ${this.state.createdUser.email} created successfully`}</h4>\n            <StyledButton onClick={this.props.toggleSignUp}>Start logging</StyledButton>\n        </div>\n\n    setCreatedUser = user => this.setState({createdUser: user})\n\n    render(){\n        return this.state.createdUser ? this.userCreatedForm()\n                : <Formik\n                    initialValues={{ email: '', password: '', name: '', dailyCalorieGoal: 2000 }}\n                    validate={values => {\n                        let errors = {};\n                        if (!values.email) {\n                          errors.email = 'Required';\n                        } else if (\n                          !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n                        ) {\n                          errors.email = 'Invalid email address';\n                        }\n                        return errors;\n                      }}\n                    onSubmit={ async (values, { setSubmitting }) => {\n                        setTimeout(() => {\n                            setSubmitting(false);\n                        }, 400);\n                        const response = await signUpUser(values);\n                        //set the user returned from the promise\n                        this.setCreatedUser(await response.json());\n                    }}>\n                    {({\n                        values,\n                        errors,\n                        touched,\n                        handleChange,\n                        handleSubmit,\n                        isSubmitting,\n                        /* and other goodies */\n                    }) => (<SignUpContainer>\n                            <h2>Create an account:</h2>\n                                <SignUpForm onSubmit={handleSubmit}>\n                                    <FormItem\n                                            type=\"email\"\n                                            name=\"email\"\n                                            handleChange={handleChange}\n                                            value={values.email}\n                                        />\n                                    <FormItem\n                                            type=\"text\"\n                                            name=\"name\"\n                                            handleChange={handleChange}\n                                            value={values.name}\n                                        />\n                                    <FormItem\n                                            type=\"text\"\n                                            name=\"daily calorie goal\"\n                                            handleChange={handleChange}\n                                            value={values.dailyCalorieGoal}\n                                        />\n                                    <FormItem\n                                            type=\"password\"\n                                            name=\"password\"\n                                            handleChange={handleChange}\n                                            value={values.password}\n                                        />\n                                    <Button type=\"submit\" disabled={isSubmitting}>\n                                        Submit\n                                    </Button>\n                                    <Button inverse value='Cancel' />\n                                </SignUpForm>\n                    </SignUpContainer> )}\n                </Formik>\n    }\n}\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}