{"ast":null,"code":"import _regeneratorRuntime from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/martinbrandt/martin-brandt/calorie-counter/src/pages/CalorieLogger.jsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  background-color: \", \";\\n  height: 70vh;\\n  margin: 30px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport Header from 'components/Header';\nimport Table from 'components/Table';\nimport styled from 'styled-components';\nimport { lightGreen } from 'variables';\nimport { loadUserMeals } from 'Api';\nimport { append, without, contains } from 'ramda';\nvar Body = styled.div(_templateObject(), lightGreen);\n\nvar CalorieLogger =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CalorieLogger, _Component);\n\n  function CalorieLogger() {\n    var _this;\n\n    _classCallCheck(this, CalorieLogger);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalorieLogger).call(this));\n\n    _this.toggleEditing = function (id) {\n      contains(id, _this.state.editingIndexes) ? _this.setState(function (prevState) {\n        return {\n          editingIndexes: without(id, prevState.editingIndexes)\n        };\n      }) : _this.setState(function (prevState) {\n        return {\n          editingIndexes: append(id, prevState.editingIndexes)\n        };\n      });\n    };\n\n    _this.setMeals =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var mealResponse;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return loadUserMeals();\n\n            case 2:\n              mealResponse = _context.sent;\n              _context.t0 = _this;\n              _context.next = 6;\n              return mealResponse.json();\n\n            case 6:\n              _context.t1 = _context.sent;\n              _context.t2 = {\n                meals: _context.t1\n              };\n\n              _context.t0.setState.call(_context.t0, _context.t2);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.setLoggedIn = function () {\n      return _this.setState({\n        loggedIn: true\n      });\n    };\n\n    _this.state = {\n      loggedIn: sessionStorage.getItem('jwt') !== null,\n      meals: [],\n      editingIndexes: []\n    };\n    return _this;\n  }\n\n  _createClass(CalorieLogger, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.state.loggedIn) {\n        this.setMeals();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!prevState.loggedIn && this.state.loggedIn) {\n        //load the meals\n        this.setMeals();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(Header, {\n        toggleSignUp: this.props.toggleSignUp,\n        setUserLoggedIn: this.setLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return CalorieLogger;\n}(Component);\n\nCalorieLogger.defaultProps = {\n  items: [{\n    type: 'addNewItem'\n  }]\n};\nexport default CalorieLogger;","map":{"version":3,"sources":["/Users/martinbrandt/martin-brandt/calorie-counter/src/pages/CalorieLogger.jsx"],"names":["React","Component","Header","Table","styled","lightGreen","loadUserMeals","append","without","contains","Body","div","CalorieLogger","toggleEditing","id","state","editingIndexes","setState","prevState","setMeals","mealResponse","json","meals","setLoggedIn","loggedIn","sessionStorage","getItem","prevProps","props","toggleSignUp","defaultProps","items","type"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAAQC,UAAR,QAAyB,WAAzB;AACA,SAAQC,aAAR,QAA4B,KAA5B;AACA,SAAQC,MAAR,EAAgBC,OAAhB,EAAyBC,QAAzB,QAAwC,OAAxC;AAEA,IAAMC,IAAI,GAAGN,MAAM,CAACO,GAAV,oBACYN,UADZ,CAAV;;IAMMO,a;;;;;AACF,2BAAc;AAAA;;AAAA;;AACV;;AADU,UAedC,aAfc,GAeE,UAAAC,EAAE,EAAI;AAClBL,MAAAA,QAAQ,CAACK,EAAD,EAAK,MAAKC,KAAL,CAAWC,cAAhB,CAAR,GACA,MAAKC,QAAL,CAAc,UAAAC,SAAS;AAAA,eAAK;AAACF,UAAAA,cAAc,EAAER,OAAO,CAACM,EAAD,EAAKI,SAAS,CAACF,cAAf;AAAxB,SAAL;AAAA,OAAvB,CADA,GAEA,MAAKC,QAAL,CAAc,UAAAC,SAAS;AAAA,eAAK;AAACF,UAAAA,cAAc,EAAET,MAAM,CAACO,EAAD,EAAKI,SAAS,CAACF,cAAf;AAAvB,SAAL;AAAA,OAAvB,CAFA;AAGH,KAnBa;;AAAA,UA4BdG,QA5Bc;AAAA;AAAA;AAAA;AAAA,6BA4BH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACoBb,aAAa,EADjC;;AAAA;AACDc,cAAAA,YADC;AAAA;AAAA;AAAA,qBAEqBA,YAAY,CAACC,IAAb,EAFrB;;AAAA;AAAA;AAAA;AAEQC,gBAAAA,KAFR;AAAA;;AAAA,0BAEFL,QAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA5BG;;AAAA,UAiCdM,WAjCc,GAiCA;AAAA,aAAM,MAAKN,QAAL,CAAc;AAACO,QAAAA,QAAQ,EAAC;AAAV,OAAd,CAAN;AAAA,KAjCA;;AAEV,UAAKT,KAAL,GAAa;AACTS,MAAAA,QAAQ,EAAEC,cAAc,CAACC,OAAf,CAAuB,KAAvB,MAAkC,IADnC;AAETJ,MAAAA,KAAK,EAAC,EAFG;AAGTN,MAAAA,cAAc,EAAC;AAHN,KAAb;AAFU;AAOb;;;;wCAEkB;AACf,UAAG,KAAKD,KAAL,CAAWS,QAAd,EAAuB;AACnB,aAAKL,QAAL;AACH;AACJ;;;uCAQkBQ,S,EAAWT,S,EAAU;AACpC,UAAG,CAACA,SAAS,CAACM,QAAX,IAAuB,KAAKT,KAAL,CAAWS,QAArC,EAA8C;AAC1C;AACA,aAAKL,QAAL;AACH;AACJ;;;6BAWO;AACJ,aAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,oBAAC,MAAD;AAAQ,QAAA,YAAY,EAAE,KAAKS,KAAL,CAAWC,YAAjC;AAA+C,QAAA,eAAe,EAAE,KAAKN,WAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADL,EAEK,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAFL,CAAP;AAOH;;;;EA9CuBtB,S;;AAiD5BW,aAAa,CAACkB,YAAd,GAA6B;AACzBC,EAAAA,KAAK,EAAE,CAAC;AACJC,IAAAA,IAAI,EAAE;AADF,GAAD;AADkB,CAA7B;AAOA,eAAepB,aAAf","sourcesContent":["import React, {Component,} from 'react';\nimport Header from 'components/Header';\nimport Table from 'components/Table';\nimport styled from 'styled-components';\nimport {lightGreen} from 'variables';\nimport {loadUserMeals} from 'Api';\nimport {append, without, contains} from 'ramda';\n\nconst Body = styled.div`\n  background-color: ${lightGreen};\n  height: 70vh;\n  margin: 30px;\n`;\n\nclass CalorieLogger extends Component {\n    constructor() {\n        super();\n        this.state = {\n            loggedIn: sessionStorage.getItem('jwt') !== null,\n            meals:[],\n            editingIndexes:[]\n        }\n    }\n\n    componentDidMount(){\n        if(this.state.loggedIn){\n            this.setMeals();\n        }\n    }\n\n    toggleEditing = id => {\n        contains(id, this.state.editingIndexes) ? \n        this.setState(prevState => ({editingIndexes: without(id, prevState.editingIndexes)})) :\n        this.setState(prevState => ({editingIndexes: append(id, prevState.editingIndexes)}))\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(!prevState.loggedIn && this.state.loggedIn){\n            //load the meals\n            this.setMeals();\n        }\n    }\n\n    setMeals = async () => {\n        const mealResponse = await loadUserMeals();\n        this.setState({meals: await mealResponse.json()});\n    }\n\n    setLoggedIn = () => this.setState({loggedIn:true});\n\n\n\n    render(){\n        return <div>\n                    <Header toggleSignUp={this.props.toggleSignUp} setUserLoggedIn={this.setLoggedIn}/>\n                    <Body>\n                        <Table/>\n                    </Body>\n               \n               </div>\n    }\n}\n\nCalorieLogger.defaultProps = {\n    items: [{\n        type: 'addNewItem'\n    }]\n}\n\n\nexport default CalorieLogger;\n"]},"metadata":{},"sourceType":"module"}