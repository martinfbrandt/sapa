{"ast":null,"code":"import _regeneratorRuntime from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/martinbrandt/martin-brandt/calorie-counter/src/components/LoginPopover.jsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 5px;\\n    justify-content:center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    height: 300px;\\n    width: 400px;\\n    background-color: \", \";\\n    position: absolute;\\n    top: \", \";\\n    right: 0;\\n    border-left: 1px solid gray;\\n    border-right: 1px solid gray;\\n    border-bottom: 1px solid gray;\\n    padding:10px;\\n\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport { lightGreen, headerHeight } from 'variables';\nimport { Formik } from 'formik';\nimport Button from 'components/Button';\nimport FormItem from 'components/FormItem';\nimport { logInUser } from 'Api';\nimport { dissoc } from 'ramda';\nvar PopoverContainer = styled.div(_templateObject(), lightGreen, headerHeight);\nvar StyledForm = styled.form(_templateObject2());\ndocument.getElementById('CalorieLoggerHeader');\n\nvar LoginPopover =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginPopover, _Component);\n\n  function LoginPopover() {\n    var _this;\n\n    _classCallCheck(this, LoginPopover);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPopover).call(this));\n    _this.el = document.createElement('div');\n    return _this;\n  }\n\n  _createClass(LoginPopover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootId = this.props.rootId;\n      document.getElementById(rootId).appendChild(this.el);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var rootId = this.props.rootId;\n      document.getElementById(rootId).removeChild(this.el);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return ReactDOM.createPortal(React.createElement(PopoverContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(Formik, {\n        onSubmit:\n        /*#__PURE__*/\n        function () {\n          var _ref2 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(values, _ref) {\n            var setSubmitting, response, userObject;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    setSubmitting = _ref.setSubmitting;\n                    setTimeout(function () {\n                      setSubmitting(false);\n                    }, 400);\n                    _context.next = 4;\n                    return logInUser(values);\n\n                  case 4:\n                    response = _context.sent;\n                    _context.next = 7;\n                    return response.json();\n\n                  case 7:\n                    userObject = _context.sent;\n                    sessionStorage.setItem('user', JSON.stringify(userObject));\n\n                    _this2.props.setUser(dissoc('jwt', userObject));\n\n                    _this2.props.toggleLogin();\n\n                  case 11:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x, _x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, function (_ref3) {\n        var values = _ref3.values,\n            errors = _ref3.errors,\n            touched = _ref3.touched,\n            handleChange = _ref3.handleChange,\n            handleSubmit = _ref3.handleSubmit,\n            isSubmitting = _ref3.isSubmitting;\n        return React.createElement(StyledForm, {\n          onSubmit: handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, React.createElement(FormItem, {\n          name: \"email\",\n          type: \"email\",\n          handleChange: handleChange,\n          value: values.email,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }), React.createElement(FormItem, {\n          name: \"password\",\n          type: \"password\",\n          handleChange: handleChange,\n          value: values.password,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }), React.createElement(Button, {\n          inverse: true,\n          value: \"Login\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }));\n      })), this.el);\n    }\n  }]);\n\n  return LoginPopover;\n}(Component);\n\nexport default LoginPopover;","map":{"version":3,"sources":["/Users/martinbrandt/martin-brandt/calorie-counter/src/components/LoginPopover.jsx"],"names":["React","Component","ReactDOM","styled","lightGreen","headerHeight","Formik","Button","FormItem","logInUser","dissoc","PopoverContainer","div","StyledForm","form","document","getElementById","LoginPopover","el","createElement","rootId","props","appendChild","removeChild","createPortal","values","setSubmitting","setTimeout","response","json","userObject","sessionStorage","setItem","JSON","stringify","setUser","toggleLogin","errors","touched","handleChange","handleSubmit","isSubmitting","email","password"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport {lightGreen, headerHeight} from 'variables';\nimport {Formik,} from 'formik';\nimport Button from 'components/Button';\nimport FormItem from 'components/FormItem'\nimport {logInUser} from 'Api';\nimport {dissoc} from 'ramda';\nconst PopoverContainer = styled.div`\n    height: 300px;\n    width: 400px;\n    background-color: ${lightGreen};\n    position: absolute;\n    top: ${headerHeight};\n    right: 0;\n    border-left: 1px solid gray;\n    border-right: 1px solid gray;\n    border-bottom: 1px solid gray;\n    padding:10px;\n\n`\n\nconst StyledForm = styled.form`\n    margin: 5px;\n    justify-content:center;\n`\n\ndocument.getElementById('CalorieLoggerHeader')\nclass LoginPopover extends Component {\n    constructor() {\n        super();\n        this.el = document.createElement('div');\n    }\n\n    componentDidMount(){\n        const {rootId} = this.props\n        document.getElementById(rootId).appendChild(this.el);\n    }\n\n    componentWillUnmount(){\n        const {rootId} = this.props\n        document.getElementById(rootId).removeChild(this.el);\n    }\n    \n    render() {\n        return ReactDOM.createPortal(\n        <PopoverContainer>\n            <Formik\n                onSubmit={ async (values, { setSubmitting }) => {\n                    setTimeout(() => {\n                        setSubmitting(false);\n                    }, 400);\n                    const response = await logInUser(values);\n\n                    //set the user returned from the promise\n                    const userObject = await response.json();\n                    \n                    sessionStorage.setItem('user', JSON.stringify(userObject));\n\n                    this.props.setUser(dissoc('jwt', userObject));\n\n                    this.props.toggleLogin();\n                }}\n            >{({values,\n                errors,\n                touched,\n                handleChange,\n                handleSubmit,\n                isSubmitting}) =>\n                <StyledForm onSubmit={handleSubmit}>\n                    <FormItem\n                        name='email'\n                        type='email'\n                        handleChange={handleChange}\n                        value={values.email}\n                    />\n                    <FormItem\n                        name='password'\n                        type='password'\n                        handleChange={handleChange}\n                        value={values.password}\n                    />\n                    <Button inverse value='Login' type='submit'/>\n                </StyledForm>\n            }\n            </Formik>\n        </PopoverContainer>, this.el)\n    }\n}\n\nexport default LoginPopover;"]},"metadata":{},"sourceType":"module"}