{"ast":null,"code":"import _regeneratorRuntime from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/martinbrandt/martin-brandt/calorie-counter/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/martinbrandt/martin-brandt/calorie-counter/src/components/LoginPopover.jsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 5px;\\n    align-items:center;\\n    display:flex;\\n    flex-direction:column;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    height: 250px;\\n    width: 400px;\\n    background-color: \", \";\\n    position: absolute;\\n    top: \", \";\\n    right: 0;\\n    border-left: 1px solid gray;\\n    border-right: 1px solid gray;\\n    border-bottom: 1px solid gray;\\n    padding:10px;\\n\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport { lightGreen, headerHeight } from 'variables';\nimport { Formik } from 'formik';\nimport Button from 'components/Button';\nimport FormItem from 'components/FormItem';\nimport { logInUser } from 'Api';\nimport { dissoc } from 'ramda';\nimport InlineError from 'components/InlineError';\nvar PopoverContainer = styled.div(_templateObject(), lightGreen, headerHeight);\nvar StyledForm = styled.form(_templateObject2());\ndocument.getElementById('CalorieLoggerHeader');\n\nvar LoginPopover =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginPopover, _Component);\n\n  function LoginPopover() {\n    var _this;\n\n    _classCallCheck(this, LoginPopover);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPopover).call(this));\n    _this.el = document.createElement('div');\n    _this.state = {\n      error: null\n    };\n    return _this;\n  }\n\n  _createClass(LoginPopover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootId = this.props.rootId;\n      document.getElementById(rootId).appendChild(this.el);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var rootId = this.props.rootId;\n      document.getElementById(rootId).removeChild(this.el);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return ReactDOM.createPortal(React.createElement(PopoverContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(Formik, {\n        onSubmit:\n        /*#__PURE__*/\n        function () {\n          var _ref2 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(values, _ref) {\n            var setSubmitting, userObject;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    setSubmitting = _ref.setSubmitting;\n                    setTimeout(function () {\n                      setSubmitting(false);\n                    }, 400);\n                    _context.prev = 2;\n                    _context.next = 5;\n                    return logInUser(values);\n\n                  case 5:\n                    userObject = _context.sent;\n                    //set the user returned from the promise\n                    sessionStorage.setItem('user', JSON.stringify(userObject));\n\n                    _this2.props.setUser(dissoc('jwt', userObject));\n\n                    _this2.props.toggleLogin();\n\n                    _context.next = 14;\n                    break;\n\n                  case 11:\n                    _context.prev = 11;\n                    _context.t0 = _context[\"catch\"](2);\n\n                    _this2.setState({\n                      error: _context.t0.message\n                    });\n\n                  case 14:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[2, 11]]);\n          }));\n\n          return function (_x, _x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, function (_ref3) {\n        var values = _ref3.values,\n            errors = _ref3.errors,\n            touched = _ref3.touched,\n            handleChange = _ref3.handleChange,\n            handleSubmit = _ref3.handleSubmit,\n            isSubmitting = _ref3.isSubmitting;\n        return React.createElement(StyledForm, {\n          onSubmit: handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(FormItem, {\n          name: \"email\",\n          type: \"email\",\n          handleChange: handleChange,\n          value: values.email,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), React.createElement(FormItem, {\n          name: \"password\",\n          type: \"password\",\n          handleChange: handleChange,\n          value: values.password,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }), React.createElement(InlineError, {\n          err: _this2.state.error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }), React.createElement(Button, {\n          inverse: true,\n          value: \"Login\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }));\n      })), this.el);\n    }\n  }]);\n\n  return LoginPopover;\n}(Component);\n\nexport default LoginPopover;","map":{"version":3,"sources":["/Users/martinbrandt/martin-brandt/calorie-counter/src/components/LoginPopover.jsx"],"names":["React","Component","ReactDOM","styled","lightGreen","headerHeight","Formik","Button","FormItem","logInUser","dissoc","InlineError","PopoverContainer","div","StyledForm","form","document","getElementById","LoginPopover","el","createElement","state","error","rootId","props","appendChild","removeChild","createPortal","values","setSubmitting","setTimeout","userObject","sessionStorage","setItem","JSON","stringify","setUser","toggleLogin","setState","message","errors","touched","handleChange","handleSubmit","isSubmitting","email","password"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport {lightGreen, headerHeight} from 'variables';\nimport {Formik,} from 'formik';\nimport Button from 'components/Button';\nimport FormItem from 'components/FormItem'\nimport {logInUser} from 'Api';\nimport {dissoc} from 'ramda';\nimport InlineError from 'components/InlineError';\nconst PopoverContainer = styled.div`\n    height: 250px;\n    width: 400px;\n    background-color: ${lightGreen};\n    position: absolute;\n    top: ${headerHeight};\n    right: 0;\n    border-left: 1px solid gray;\n    border-right: 1px solid gray;\n    border-bottom: 1px solid gray;\n    padding:10px;\n\n`\n\nconst StyledForm = styled.form`\n    margin: 5px;\n    align-items:center;\n    display:flex;\n    flex-direction:column;\n`\n\ndocument.getElementById('CalorieLoggerHeader')\nclass LoginPopover extends Component {\n    constructor() {\n        super();\n        this.el = document.createElement('div');\n        this.state = {\n            error: null\n        }\n    }\n\n    componentDidMount(){\n        const {rootId} = this.props\n        document.getElementById(rootId).appendChild(this.el);\n    }\n\n    componentWillUnmount(){\n        const {rootId} = this.props\n        document.getElementById(rootId).removeChild(this.el);\n    }\n    \n    render() {\n        return ReactDOM.createPortal(\n        <PopoverContainer>\n            <Formik\n                onSubmit={ async (values, { setSubmitting }) => {\n                    setTimeout(() => {\n                        setSubmitting(false);\n                    }, 400);\n                    try{\n                        const userObject = await logInUser(values);\n\n                        //set the user returned from the promise\n                        sessionStorage.setItem('user', JSON.stringify(userObject));\n\n                        this.props.setUser(dissoc('jwt', userObject));\n\n                        this.props.toggleLogin();\n                    } catch (err){\n                        this.setState({error: err.message})\n                    }\n                }}\n            >{({values,\n                errors,\n                touched,\n                handleChange,\n                handleSubmit,\n                isSubmitting}) =>\n                <StyledForm onSubmit={handleSubmit}>\n                    <FormItem\n                        name='email'\n                        type='email'\n                        handleChange={handleChange}\n                        value={values.email}\n                    />\n                    <FormItem\n                        name='password'\n                        type='password'\n                        handleChange={handleChange}\n                        value={values.password}\n                    />\n                    <InlineError err={this.state.error}/>\n                    <Button inverse value='Login' type='submit'/>\n                </StyledForm>\n            }\n            </Formik>\n        </PopoverContainer>, this.el)\n    }\n}\n\nexport default LoginPopover;"]},"metadata":{},"sourceType":"module"}